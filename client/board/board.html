<template name="boardNew">
  <h1>Creating board</h1>
</template>

<template name="board">
  <nav class="nav">
    <h1>
      <a title="Home" class="btn btn-link btn-home" href="/">
        <i class="fa fa-home"></i>
      </a>
      {{>mapTitle}}
    </h1>
  </nav>

  {{#each buckets}}
    {{> bucket}}
  {{/each}}

  {{> cardEdit card}}
</template>

<template name="mapTitle">
  <span class="map-title">{{board.name}}</span>
  <span class="edit-map-title">
    <input type="text" name="new-map-title" value="{{board.name}}" class="input-map-title" data-mapid="{{board._id}}">
  </span>
</template>

<template name="bucket">
  <div class="bucket {{slugify name}} {{#if isFull}}bucket-full{{/if}}"
       data-bucket="{{_id}}"
       draggable="{{#if isTrash}}false{{else}}true{{/if}}">

    <header class="bucket-header">
      <h1 title="{{#unless isTrash}}Drag to re-prioritise{{/unless}}">
        {{name}}
      </h1>
    </header>
    <ul>
    {{#each slots}}
      <li class="slot {{#unless _id}}slot-empty{{/unless}}"
          title="{{#if _id}}Drag to re-prioritise{{else}}Click to add a card{{/if}}"
          data-slot="{{preferredSlot}}" >
        {{#if _id}}
          {{> card}}
        {{/if}}
      </li>
    {{/each}}
    </ul>
  </div>
</template>

<template name="card">

  <div class="card" draggable="true" data-card="{{_id}}">
    <header>
      <h1>{{name}}</h1>
    </header>
    <p>{{desc}}</p>
    {{#if leader}}
    <footer>
      <div class="leader" title="Leader">
        <i class="fa fa-user"></i> {{leader}}
      </div>
    </footer>
    {{/if}}
  </div>

  {{>popover}}

</template>

<template name="popover">
  <article class="popover">
    <main>
      {{#if desc}}
        <div class="field">
          <span class="label">Description</span>
          <span class="value">{{desc}}</span>
        </div>
      {{/if}}
      {{#if leader}}
        <div class="field">
          <span class="label">Leader</span>
          <span class="value">{{leader}}</span>
        </div>
      {{/if}}
      {{#if due}}
        <div class="field">
          <span class="label">Due date</span>
          <time class="value">{{due}}</time>
        </div>
      {{/if}}
      {{#if longdesc}}
        <div class="field">
          <span class="label">More Info</span>
          <span class="value longdesc">{{longdesc}}</span>
        </div>
      {{/if}}    
    </main>
  </article>
</template>

<template name="cardEdit">
  <div class="modal card-edit {{#if show}}show{{/if}}">
    <header>
      <h1>Edit card</h1>
      <button class="btn btn-link btn-close">
        <i class="fa fa-times"></i>
      </button>
    </header>
    <form>
      <div class="input-group">
        <label for="edit-card-desc">Title</label>
        <input type="text" class="form-control" id="card-edit-name" value="{{name}}" />
      </div>
      <div class="input-group">
        <label for="edit-card-desc">Description</label>
        <input type="text" class="form-control" id="card-edit-desc" value="{{desc}}"/>
      </div>
      <div class="input-group">
        <label for="edit-card-leader">Leader</label>
        <input type="text" class="form-control" id="card-edit-leader" value="{{leader}}" />
      </div>
      <div class="input-group">
        <label for="edit-card-due">Due date</label>
        <input type="date" class="form-control" id="card-edit-due" value="{{due}}" />
      </div>
      <div class="input-group">
        <label for="edit-card-longdesc">More info</label>
        <textarea class="form-control" id="card-edit-longdesc">{{longdesc}}</textarea>
      </div>
      <input type="submit" style="display:none;"/>
    </form>
    <footer>
      <button class="btn btn-link btn-trash" title="Move to trash">
        <i class="fa fa-trash"></i>
      </button>
      <button class="btn btn-link btn-cancel">Cancel</button>
      <button class="btn btn-primary btn-save">Save</button>
    </footer>
  </div>
</template>
